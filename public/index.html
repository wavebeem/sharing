<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Expenses</title>
        <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.1/underscore-min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/knockout/2.3.0/knockout-min.js"></script>
        <!-- <script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js"></script>-->
        <script src="js/css-reloader.js"></script>
        <script src="js/util.js"></script>
        <script src="js/ExpenseForm.js"></script>
        <script src="js/ExpenseGroup.js"></script>
        <script src="js/Expense.js"></script>
        <script src="js/Root.js"></script>
        <script src="js/main.js"></script>
        <link rel="stylesheet" href="css/style.css">
        <style id="name_css"></style>
    </head>
    <body>
        <h1>Expenses</h1>
        <!-- ko foreach: expenseGroup().summary() -->
            <div class="floaty_container">
                <table class="summary">
                    <thead>
                        <tr>
                            <th
                            colspan="2"
                            data-bind="
                            text: $data[0].debtor + ' owes',
                            css: 'color_' + $data[0].debtor.toLowerCase()"></th>
                        </tr>
                    </thead>
                    <tbody data-bind="foreach: $data">
                        <tr>
                            <td class="money" data-bind="text: amount.toFixed(0)"></td>
                            <td><div class="color_left" data-bind="text: debtee, css: 'color_' + debtee.toLowerCase()"></div></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        <!-- /ko -->
        <div class="floaty_container">
            <button
            type="button"
            class="form_toggle"
            data-bind="
            visible: tempExpenseForm().notVisibile,
            click: tempExpenseForm().show">
                add expense&hellip;
            </button>
            <form
            action=""
            id="expense_form"
            data-bind="
            with: tempExpenseForm,
            submit: saveTempExpense,
            visible: tempExpenseForm().visible">
                <div>
                    <select data-bind="options: $root.people"></select>
                    <span class="trivial_word">on</span>
                    <select data-bind="options: months, value: selectedMonth"></select>
                    <select data-bind="options: days,   value: selectedDay"></select>
                    <select data-bind="options: years,  value: selectedYear"></select>
                </div>
                <div>
                    <input type="number" min="1" max="9999" step="1" placeholder="price" data-bind="value: price">
                    <span class="trivial_word">for</span>
                    <input id="new_expense_description" type="text" placeholder="description" data-bind="value: description">
                </div>
                <div class="button_group">
                    <button type="submit" class="primary">Add</button>
                    <button type="button" data-bind="click: hide">Cancel</button>
                </div>
            </form>
        </div>
        <div id="expense_group" data-bind="foreach: { data: expenseGroup().expenses(), as: 'expense' }">
            <div class="expense_item">
                <div>
                    <span class="money"><span data-bind="text: formattedPrice"></span></span>
                    <span class="trivial_word">on</span>
                    <span data-bind="text: formattedDate"></span>
                    <span class="trivial_word">by</span>
                    <input class="stealth_edit paid_by" data-bind="value: paidBy">
                    <span class="share_value">
                        <span class="money" data-bind="text: formattedShare"></span>
                        <span class="trivial_word">each</span>
                    </span>
                    <div class="clearfix"></div>
                </div>
                <div>
                    <input class="description stealth_edit" data-bind="value: description">
                    <div class="shares_paid" data-bind="foreach: $root.people"><!--
                        --><button
                            class="share_paid border"
                            type="button"
                            data-bind="
                                click: expense.toggleSharePaidBy.bind(expense),
                                css: 'color_' + $data.toLowerCase()"></button><!--
                    --></div>
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>
    </body>
</html>
