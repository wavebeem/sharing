<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Expenses</title>
        <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.1/underscore-min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/knockout/2.3.0/knockout-min.js"></script>
        <!-- <script src="//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js"></script>-->
        <script src="js/css-reloader.js"></script>
        <script src="js/util.js"></script>
        <script src="js/ExpenseForm.js"></script>
        <script src="js/ExpenseGroup.js"></script>
        <script src="js/Expense.js"></script>
        <script src="js/Root.js"></script>
        <script src="js/main.js"></script>
        <link rel="stylesheet" href="css/style.css">
        <style id="name_css"></style>
    </head>
    <body data-bind="event: { keydown: handleKeyboardShortcuts }">
        <div id="debts" class="column" data-bind="foreach: expenseGroup().summary()">
            <h1
            colspan="2"
            data-bind="
            text: $data[0].debtor + ' owes',
            css: 'color_' + $data[0].debtor"></h1>
            <div class="floaty_container">
                <table class="summary">
                    <tbody data-bind="foreach: $data">
                        <tr>
                            <td class="money" data-bind="text: formattedCurrency(amount)"></td>
                            <td><div class="color_left" data-bind="text: debtee, css: 'color_' + debtee"></div></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div id="expenses" class="column">
            <!-- <h1>Expenses</h1>-->
            <div class="main_margin">
                <button
                type="button"
                class="form_toggle floaty_container transient"
                id="new_expense_show"
                data-bind="
                visible: tempExpenseForm().notVisibile,
                click: tempExpenseForm().show">
                    add expense&hellip;
                </button>
            </div>
            <form
            action=""
            id="expense_form"
            class="floaty_container"
            data-bind="
            with: tempExpenseForm,
            submit: saveTempExpense,
            visible: tempExpenseForm().visible">
                <div>
                    <span data-bind="text: $root.currentUser"></span>
                    <span class="trivial_word">spent</span>
                    <input id="price_field" class="price" type="text" min="1" max="9999" step="1" placeholder="$" data-bind="value: price">
                    <span class="trivial_word">for</span>
                    <select data-bind="options: $root.everyoneAndPeople, value: spendTarget"></select>
                </div>
                <div>
                    <span class="trivial_word">on</span>
                    <select data-bind="options: months, value: selectedMonth"></select>
                    <span class="trivial_word">/</span>
                    <select data-bind="options: days,   value: selectedDay"></select>
                    <span class="trivial_word">/</span>
                    <select data-bind="options: years,  value: selectedYear"></select>
                    <span class="trivial_word">to pay for</span>
                </div>
                <div>
                    <input
                    id="new_expense_description"
                    class="long description"
                    type="text"
                    placeholder="groceries, bills, etc."
                    data-bind="value: description">
                </div>
                <div class="button_group">
                    <button type="submit" class="primary"><span class="icon icon-plus"></span>Add</button>
                    <button type="button" id="new_expense_hide" data-bind="click: hide"><span class="icon icon-close"></span>Cancel</button>
                </div>
            </form>
            <div id="expense_group" data-bind="foreach: { data: expenseGroup().expenses(), as: 'expense' }">
                <div class="expense_item">
                    <div>
                        <span class="money"><span data-bind="text: formattedCurrency(price)"></span></span>
                        <span class="trivial_word">on</span>
                        <span data-bind="text: formattedDate(date)"></span>
                        <span class="trivial_word">by</span>
                        <span data-bind="text: paidBy"></span>
                        <span data-bind="visible: paidFor() !== 'everyone'">
                            <span class="trivial_word">for</span>
                            <span data-bind="text: paidFor"></span>
                        </span>
                    </div>
                    <div>
                        <span class="description" data-bind="text: description"></span
                        ><span class="share_value" data-bind="visible: paidFor() === 'everyone'">
                            <span class="money" data-bind="text: formattedCurrency(share)"></span>
                            <span class="trivial_word">each</span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
